$(function(){var N={fixedLeft:false,fixedRight:false,fixedMinWidth:100,fixedMaxWidth:500,totalString:"--",totalTitle:"总计",handleSortData:{},noWidthColAdaptClient:false};var c=v();var r='<div class="c-table__sort {{class}}"><i class="c-table__down" aria-hidden="true"></i><i class="c-table__up" aria-hidden="true"></i></div >';var o='<div class="c-table__fixed-header-wrapper">{{theadHtml}}</div><div class="c-table__fixed-body-wrapper"> {{tbodyHtml}}</div>';var d='<div class="c-table__fixed"> {{fixedWrapper}}</div>';var u='<div class="c-table__fixed-right"> {{fixedWrapper}}</div>';var y='<div class="c-table--main" style="width: 100%;"><div class="c-table__header-wrapper"> {{theadHtml}}</div><div class="c-table__body-wrapper"> {{tbodyHtml}}</div> {{fixedLeft}}{{fixedRight}}</div>';var C='<td class="gutter"></td>';var A='<td class="gutter" style="width:'+c+'px;"></td>';var x='<div class="c-table__fixed-right-patch" style="width: '+c+'px; height: {{headerHeight}}px;"></div>';$("body").on("click.jqTable",".c-table__down",function(){m($(this),true)});$("body").on("click.jqTable",".c-table__up",function(){m($(this),false)});function L(W,X){this.$container=X;this.config=$.extend({},N,W);this.init(this.$container)}$.extend(L.prototype,{init:function(X){this.isSafria=/version\/([\d.]+).*safari/i.test(navigator.userAgent);this.render(X);this.event(X);var Y=this;var W=this.$table.find(".c-table__sort");if(W){$.each(W,function(Z,aa){if($(aa).hasClass("activeUp")){$(aa).find(".c-table__up").trigger("click.jqTable");Y.updateEvent();return false}if($(aa).hasClass("activeDown")){$(aa).find(".c-table__down").trigger("click.jqTable");Y.updateEvent();return false}})}$(window).trigger("resize")},render:function(Z){var aa=this;var X=B(aa,Z).data("table",aa);if(!aa.$table){aa.tableHeight=Z.data("height");var W=Z.parents(".c-table").last();X.addClass(W.attr("class"));W.removeAttr("class");Z.after(X).remove();aa.$table=X;aa.$table.data("height",aa.tableHeight)}else{aa.$table.html(X.html());X=aa.$table}X.find("table").addClass("c-table--noWp100");aa.colJson=e(aa);X.find("table").removeClass("c-table--noWp100");aa.totalJson=V(aa);aa.fixedWidth=aa.colJson.isAllWidth;aa.headerHeight=n(aa.$table);if(!aa.totalJson.noTotal){aa.totalArr=l(aa)}if(aa.fixedWidth){var Y=aa.colJson.width.reduce(b,0);aa.$table.width(Y+1)}if(!document.addEventListener){G(aa)}else{H(aa)}},event:function(W){var X=this;$(window).resize(function(){H(X.$table.data("table"))});this.updateEvent()},updateEvent:function(){var Y=this;if(document.addEventListener){Y.$table.find(".c-table__body-wrapper").scroll(function(){var ad=$(this);var aa=ad.parents(".c-table--main");var af=ad.scrollLeft();var ab=ad.scrollTop();var ae=aa.find(".c-table__header-wrapper table");var ac=aa.find(".c-table__footer-wrapper table");var Z=aa.find(".c-table__fixed-body-wrapper table");ae.css({"margin-left":-af+"px"});ac.css({"margin-left":-af+"px"});Z.css({"margin-top":-ab+"px"})});var X={isInit:false,scrollTop:0,timer:"",prevTop:0,maxScroll:0,bodyStyle:"",isFirst:false,isBodyScroll:function(){return($("html")[0].scrollHeight-$("html")[0].clientHeight)>0}};Y.$table.find(".c-table__fixed-body-wrapper").on("mousewheel",function(Z){clearTimeout(X.timer);var aa=$(this).parents(".c-table--main");var ac=aa.find(".c-table__body-wrapper");var ad=aa.data("table");if(!ad.scrollResult.colScroll){return}X.timer=setTimeout(function(){W();if(X.isBodyScroll()){$("body").attr("style",X.bodyStyle);X.isFirst=false}},500);if(!X.isFirst&&X.isBodyScroll()){X.isFirst=true;X.bodyStyle=$("body").attr("style");$("body").css({overflow:"hidden","padding-right":c+"px"})}if(!X.isInit){X.isInit=true;X.scrollTop=ac.scrollTop();X.maxScroll=ac.find("table").height()-ac.height();if(ad.scrollResult.rowScroll){X.maxScroll+=c}return}if(X.prevTop>Math.abs(Z.deltaY)){W();return}X.prevTop=Math.abs(Z.deltaY);var ab=-X.scrollTop+Z.deltaY;if(ab>0){ab=0}if(ab<(-X.maxScroll)){ab=-X.maxScroll}aa.find(".c-table__fixed-body-wrapper table").css({"margin-top":ab+"px"});ac.scrollTop(-ab)});function W(){X.isInit=false;X.scrollTop=0;X.prevTop=0}}if(Y.config.fixedLeft||Y.config.fixedRight){Y.$table.find("tbody tr").hover(function(){var ac=$(this);var ab=ac.parents(".c-table--main");var aa=ac.parents("tbody").find("tr").index(ac);var Z=ab.find("tbody");$.each(Z,function(ae,ad){$(ad).find("tr").eq(aa).addClass("hover-row")})},function(){var Z=$(this).parents(".c-table--main").find("tbody");Z.find("tr").removeClass("hover-row")})}},updateHtml:function(W){this.init($(W))},updateHeight:function(W){this.tableHeight=W||this.$table.data("height");this.$table.data("height",this.tableHeight);var Y=this.tableHeight-this.headerHeight;var X=this.tableHeight;if(this.scrollResult.rowScroll){Y-=c;X-=c}if(this.config.fixedRight||this.config.fixedLeft){this.$table.find(".c-table__fixed-body-wrapper").css({"max-height":Y+"px",top:this.headerHeight+"px"})}if(this.config.fixedLeft){this.$table.find(".c-table__fixed").height(X+"px")}if(this.config.fixedRight){this.$table.find(".c-table__fixed-right").height(X+"px")}H(this)}});function m(ag,Y){var ad=Y?"activeDown":"activeUp";var aa=ag.parents(".c-table--main");var ac=aa.data("table");var ai=aa.find(".c-table__fixed-body-wrapper tbody");var X=aa.find(".c-table__body-wrapper table tbody");var Z=X.find("tr");var ah=ag.parents("thead").find("th");var af=[];var ab=ah.index(ag.parents("th"));aa.find(".c-table__sort").removeClass("activeUp activeDown");aa.find(".c-table__fixed-header-wrapper th").eq(ab).find(".c-table__sort").addClass(ad);aa.find(".c-table__header-wrapper th").eq(ab).find(".c-table__sort").addClass(ad);if(Z.length<=1){return}$.each(Z,function(al,ak){var aj={};aj.index=al;aj.value=$(ak).find("td").eq(ab).text().trim();af.push(aj)});var ae=ac.config.handleSortData;var W=ac.sortConfig;if(W[ab]){if(W[ab]&&ae[W[ab]]&&typeof(ae[W[ab]])==="function"){af=ae[W[ab]](af)}else{af=g(af,W[ab])}}af=E(af,"value",Y);w(ac,X,af);$.each(ai,function(aj,ak){w(ac,$(ak),af)})}function g(aa,ab){var W=[];var Z;var Y=new RegExp(ab,"g");for(var X=0;X<aa.length;X++){Z=aa[X];Z.value=(Z.value+"").replace(Y,"");W.push(Z)}return W}function w(ad,X,ac){var ab=X.find("tr");var Y=X.clone();Y.html("");for(var aa=0,W=ac.length;aa<W;aa++){var Z=ac[aa].index;Y.append(ab.eq(Z).clone())}X.replaceWith(Y);ad.updateEvent()}function E(W,Y,Z){var X;if(W.length<2){return}if(isNaN(W[0][Y])){X=F}else{X=t}W.sort(function(ab,aa){var ad=ab[Y],ac=aa[Y];if(Z){ad=aa[Y];ac=ab[Y]}return X(ad,ac)});return W}function t(X,W){return X-W}function F(X,W){var Z=X.toLowerCase(),Y=W.toLowerCase();if(Z<Y){return -1}if(Z>Y){return 1}return 0}function i(Z,ab){var af=f(Z,ab);if(af.noSort){return}Z.sortConfig=af.sortConfig;var ad=af.sort;var ae=ab.find("thead th");for(var X=0,aa=ad.length;X<aa;X++){var W=ad[X];if(W){var ac=W==="up"?"activeUp":W==="down"?"activeDown":"";var Y=$(r.replace("{{class}}",ac));ae.eq(X).find(".cell").append(Y)}}}function n(W){return W.find(".c-table__header-wrapper").height()}function B(ab,ad){var ac=ad.clone().addClass("c-table__header");var Y=ad.clone().addClass("c-table__body");ac.find("tbody").remove();Y.find("thead").remove();i(ab,ac);var W=ac[0].outerHTML;var ag=Y[0].outerHTML;var aa=o.replace("{{theadHtml}}",W).replace("{{tbodyHtml}}",ag);var X=ab.config.fixedLeft?d.replace(/{{fixedWrapper}}/g,aa):"";var ae=ab.config.fixedRight?u.replace(/{{fixedWrapper}}/g,aa):"";var af=y.replace("{{theadHtml}}",W).replace("{{tbodyHtml}}",ag).replace("{{fixedLeft}}",X).replace("{{fixedRight}}",ae);var Z=$(af);return Z}function G(ab){var X=ab.$table;var aa=X.find(".c-table__body-wrapper");var W=aa.find("table");var Y;var Z=ab.colJson;U(ab);Y=J(aa,W,X,Z);if(!ab.fixedWidth){Q(ab,X,Z,Y)}P(X,Y);if(ab.fixedWidth){K(ab,X,Y)}Y=J(aa,W,X,Z);ab.scrollResult=Y;if(ab.config.fixedRight||ab.config.fixedLeft){k(ab,X,Y);I(ab,X,Y)}else{X.addClass("el-table--enable-row-transition")}if(Y.colScroll&&!X.find(".c-table__fixed-right-patch").length){aa.after(x.replace("{{headerHeight}}",ab.headerHeight))}else{if(!Y.colScroll){X.find(".c-table__fixed-right-patch").remove()}}if(!ab.totalJson.noTotal){O(ab,X)}}function H(W){if(!document.addEventListener){return}G(W)}function O(ac,X){var ab=X.find(".c-table__body-wrapper");var W=ab.clone().removeClass("c-table__body-wrapper").addClass("c-table__footer-wrapper");W.find(".c-table__body").removeClass(".c-table__body").addClass("c-table__footer");var aa=W.find("tbody tr:not(:first)").remove();var Y=X.find(".c-table__footer-wrapper");if(Y.length){Y.replaceWith(W)}else{ab.after(W)}var Z=W.find("tbody tr").eq(0).find("td");$.each(Z,function(ad,ae){Z.find(".cell").eq(ad).html(ac.totalArr[ad])})}function l(aa){var ab=aa.totalJson;var Z=aa.$table.find(".c-table__body-wrapper").find("tbody tr:not(:first)");var ae=[aa.config.totalTitle];var W=[];var X=aa.config.totalString;$.each(Z,function(af,ag){var ah=$(ag).find("td");$.each(ah,function(ai,aj){if(af===0){W.push([])}W[ai].push($(aj).text().trim())})});var ad;for(var Y=1;Y<ab.total.length;Y++){var ac=ab.total[Y];if(ac){ad=W[Y].reduce(q,0)}else{ad=X}ae.push(ad)}return ae}function I(af,ad,W){var aa=ad.find(".g-selectAll--input");if(!aa.length){return}var ab=ad.find(".c-table__fixed");var Z=ad.find(".c-table__fixed-right");var ac=ad.find(".c-table__body-wrapper tr");var ag,ae=af.colJson.width.length-1;var X=R(ac,0);var Y=R(ac,ae);if(af.config.fixedLeft&&X){z(Z,ac,0)}if(af.config.fixedRight&&Y){z(ab,ac,ae)}}function z(X,Y,W){var Z=X.find(".c-table__fixed-body-wrapper tr");if(X.length){$.each(Z,function(ab,aa){j(aa,W)})}$.each(Y,function(ab,aa){j(aa,W)})}function j(X,W){$(X).find("td").eq(W).find(".g-selectAll--input").remove()}function R(X,W){return X.eq(0).find("td").eq(W).find(".g-selectAll--input").length}function k(ah,Z,ag){var aj=ah.colJson.width.length;var Y=Z.find(".c-table__header-wrapper table th");var ae=Z.find(".c-table__body-wrapper table tr").eq(0);var ai=ae.find("td:not(.gutter)");var aq=ah.headerHeight;var ar=Z.height();var am=Z.width();var ad=ar-aq;var ap=Z.find(".c-table__fixed");var ao=Z.find(".c-table__fixed-right");var ab=ah.config;var af=ab.fixedLeft;var ac=ab.fixedRight;var an="c-table__fixed--shadow";if(ag.rowScroll){ad-=c}if(ah.config.fixedRight||af){Z.find(".c-table__fixed-body-wrapper").css({"max-height":ad+"px",top:ah.headerHeight+"px"});if(ag.rowScroll){ap.addClass(an);ao.addClass(an)}else{ap.removeClass(an);ao.removeClass(an)}}if(af&&af<=1){ap.find(".c-table__fixed-body-wrapper tr td:not(:first-child):not(.gutter)").addClass("is-hidden")}else{if(af>1){$.each(ap.find(".c-table__fixed-body-wrapper tr"),function(au,at){$.each($(at).find("td:not(.gutter)"),function(av,aw){if(av>=af){$(aw).addClass("is-hidden")}})})}}if(ac&&ac<=1){ao.find(".c-table__fixed-body-wrapper tr td:not(:nth-child("+aj+")):not(.gutter)").addClass("is-hidden")}else{if(ac>1){$.each(ao.find(".c-table__fixed-body-wrapper tr"),function(au,at){$.each($(at).find("td:not(.gutter)"),function(av,aw){if(av<=aj-ac-1){$(aw).addClass("is-hidden")}})})}}var al=ag.rowScroll?ar-c:ar;if(!ah.totalJson.noTotal){al-=ae.height()}if(af){var ak=0;if(af<=1){ak=ai.eq(0).width()}else{if(af>1){for(var aa=0;aa<af;aa++){ak+=ai.eq(aa).width()}}}ap.width(ak).height(al);if(ah.colJson.isAllWidth===true){ap.find("table").width(am)}}if(ah.config.fixedRight){var X=ag.colScroll?c:0;var W=0;if(ac<=1){W=ai.eq(ai.length-1).width()}else{if(ac>1){for(var aa=0;aa<ac;aa++){W+=ai.eq(ai.length-1-aa).width()}}}ao.width(W).height(al).css({right:X});if(ah.colJson.isAllWidth===true){ao.find("table").width(am)}}}function K(ac,X,aa){var Y=X.find(".c-table__header-wrapper table");var W=X.find(".c-table__body-wrapper table");var Z=ac.colJson.width.reduce(b,0);var ab=aa.colScroll?Z+c:Z;X.width(ab+1);Y.width(Z);W.width(Z)}function P(X,aa){var Y=X.find(".c-table__header-wrapper table");var W=X.find(".c-table__body-wrapper table");var Z=Y.find(".gutter").length;if(Z){Y.find(".gutter").remove();W.find(".gutter").remove()}}function U(ac){var X=ac.$table;var Y=ac.$table.data("height");if(Y){var ab=X.find(".c-table__body-wrapper");X.css({"max-height":Y+"px"});ab.css({"max-height":"none"});var aa=ac.headerHeight;var W=X.height();var Z=W-aa;if(!ac.totalJson.noTotal){Z-=ab.find("tbody tr").eq(0).height()}ab.css({"max-height":Z+"px"})}}function Q(ah,af,aj,Y){var W=af.find("colgroup");var ai=af.width();var aa=aj.noWidthIndex.length;var Z=aj.tdWidth.reduce(b,0);if(Y.colScroll){Z+=c}var X=ah.config.fixedMinWidth;var ac=ah.config.noWidthColAdaptClient;var ae=[];for(var ad=0;ad<aa;ad++){var ak=aj.noWidthIndex[ad];ae.push(aj.tdWidth[ak])}var ab=ae.reduce(b,0);var ag=ai-Z+ab-2;if(ae.length*X>=ag){T(ah,W,aj,ae,X)}else{ae=M(ae,ag,X,ae.length,ac);T(ah,W,aj,ae,false)}Z=aj.width.reduce(b,0)+2;af.find(".c-table__header-wrapper table").width(Z);af.find(".c-table__body-wrapper table").width(Z);af.find(".c-table__fixed-header-wrapper table").width(Z-2);af.find(".c-table__fixed-body-wrapper table").width(Z-2)}function T(ac,W,ae,ab,X){var Y=ae.noWidthIndex.length;var ad=[];for(var aa=0;aa<Y;aa++){var af=ae.noWidthIndex[aa];if(/^\d+\.\d{4,}$/.test(ab[aa]+"")){ab[aa]=Number(ab[aa]).toFixed(3)}var Z=X&&ab[aa]<X?X:ab[aa];ae.width[af]=Number(Z);if(Z>=ac.config.fixedMaxWidth){ad.push(af)}$.each(W,function(ag,ah){$(ah).find("col").eq(af).attr("width",Z)})}a(ac,W,ae,ad)}function a(aa,X,Z,W){if(aa.isSafria){var Y=Z.noWidthIndex;if(W.length>0){D(X,Z,W,true);Y=Y.filter(function(ab){return W.indexOf(ab)===-1})}if(Y.length){D(X,Z,Y,false)}}}function D(X,aa,W,Z){for(var Y=0;Y<W.length;Y++){var ab=W[Y];$.each(X,function(af,ad){var ae=$(ad).parents("table").find("tbody tr");var ac=Z?aa.width[ab]-36:"auto";$.each(ae,function(ah,ag){$(ag).find("td").eq(ab).find(".cell").width(ac)})})}}function M(ae,Y,ab,Z,ah){var af=ae.reduce(q,0);var X=(Y-af)/Z;if(!ah&&X<0){return ae}else{var ag=0;var ai=0;var W=0;if(X>0){for(var ad=0;ad<ae.length;ad++){ae[ad]=ae[ad]+X;ae[ad]<ab?ae[ad]=ab:W++}}else{for(var ac=0;ac<ae.length;ac++){if(ae[ac]<ab){ae[ac]=ab}else{if(ae[ac]>ab){var aa=ae[ac]+X;if(aa>ab){W++}ae[ac]=aa<ab?ab:aa}}}}af=ae.reduce(q,0);if(Math.floor(af)!==Math.floor(Y)){M(ae,Y,ab,W,ah)}return ae}}function h(Y,X){var W=X<Y.config.fixedMinWidth?Y.config.fixedMinWidth:X;return W}function b(X,W){return X+W}function q(X,W){return X-(-W)}function v(){var Y=document.createElement("p");Y.style.width="100%";Y.style.height="200px";var Z=document.createElement("div");Z.style.position="absolute";Z.style.top="0px";Z.style.left="0px";Z.style.visibility="hidden";Z.style.width="200px";Z.style.height="150px";Z.style.overflow="hidden";Z.appendChild(Y);document.body.appendChild(Z);var X=Y.offsetWidth;Z.style.overflow="scroll";var W=Y.offsetWidth;if(X==W){W=Z.clientWidth}document.body.removeChild(Z);return(X-W)}function f(aa,X){var Y=X.find("colgroup>col");var W=S("sort",Y);var Z=S("sortconfig",Y);return{sort:W.demo,noSort:W.nodemo,sortConfig:Z.demo}}function V(ab){var Y=ab.$table.find(".c-table__header-wrapper table");var Z=Y.find("colgroup>col");var W=S("total",Z);var aa=W.demo;var X=W.nodemo;return{total:aa,noTotal:X}}function S(W,Z){var aa=[];var Y=0;Z=Z.not("[name=gutter]");$.each(Z,function(ad,ac){var ab=$(ac).data(W);aa.push(ab);if(ab){Y++}});var X=Y?false:true;return{demo:aa,nodemo:X}}function s(Z,X,W){var aa=Z.eq(W).width();var Y=X.eq(W).width();return aa>Y?aa:Y}function e(aa){aa.$table.addClass("c-table--noWrap-init");var ad=aa.$table.find(".c-table__header-wrapper table");var Z=aa.$table.find(".c-table__body-wrapper table");var ah=ad.find("colgroup>col");var ag=ad.width();var Y=Z.width();var X=[];var ab=[];var aj=ag>Y?ag:Y;var ac=[];var af=[];var ai=true;var W=Z.find("tr").eq(0).find("td");var ae=ad.find("tr").eq(0).find("th");ah=ah.not("[name=gutter]");$.each(ah,function(an,al){var ak=$(al).attr("width")?Number($(al).attr("width")):0;ak=p(aa,ak);X.push(ak);if(ak){af.push(ak);ab.push(ak)}else{var am=p(aa,s(W,ae,an)+1);ai=false;ac.push(an);ab.push(am)}});aa.$table.addClass("c-table__cell--block").removeClass("c-table--noWrap-init");return{width:X,noWidthIndex:ac,hasWidthArr:af,isAllWidth:ai,realTotalWidth:aj,tdWidth:ab}}function p(Y,X){var W=X>Y.config.fixedMaxWidth?Y.config.fixedMaxWidth:X;return W}function J(ac,X,Y,aa){var ab=ac.height()<X.height();var W=aa.width.reduce(b,0)+1;if(ab){W+=c}var Z=W>Y.width();if(Z){ab=ac.height()-c<X.height()}return{rowScroll:Z,colScroll:ab}}$.fn.jqTable=function(W){return this.each(function(){new L(W,$(this))})}}());