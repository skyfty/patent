var jqTableObject=$({});$.sub=function(){jqTableObject.on.apply(jqTableObject,arguments)};$.unsub=function(){jqTableObject.off.apply(jqTableObject,arguments)};$.pub=function(){jqTableObject.trigger.apply(jqTableObject,arguments)};$(function(){var a=["icon-right","icon-down"];var c=$("body");c.on("click",".g-toggleTable--button",function(d){var i=$(this).parents(".g-toggleTable--title");var f=i.parents(".g-toggleTable--main");var j=f.find(".g-toggleTable--title");var g=f.find("tr");var e=g.index(i);var k=g.length;var h=j.eq(j.index(i)+1);var l=f.data("level");l?e=e+1:false;if(h.length){k=g.index(h)}$.each(f.find("tr"),function(m,n){if(m>e&&m<k){$(n).toggleClass("hide")}});i.find(".g-toggleTable--button").toggleClass(a.join(" "));b(f)});function b(i){var g=i.find(".g-toggleTable--title");var e=i.find(".g-toggleTable--buttonAll");var d=i.find(".g-toggleTable--button."+a[0]).length;var f=i.find(".g-toggleTable--button."+a[1]).length;var h=g.length-1;if(f===h){e.removeClass(a.join(" ")).addClass(a[1])}if(d===h){e.removeClass(a.join(" ")).addClass(a[0])}}c.on("click",".g-toggleTable--buttonAll",function(){var g=$(this);var d=g.hasClass(a[0]);var f=g.parents(".g-toggleTable--main").find(".c-table__child");var e=g.parents(".g-toggleTable--main").find(".g-toggleTable--title .g-toggleTable--button");e.removeClass(a.join(" "));g.removeClass(a.join(" "));if(d){f.removeClass("hide");e.addClass(a[1]);g.addClass(a[1])}else{f.addClass("hide");e.addClass(a[0]);g.addClass(a[0])}})});$(function(){var b=$("body");b.on("change",".g-selectAll",function(c){$(this).parents(".g-selectAll--main").find(".g-selectAll--input").prop("checked",this.checked)});b.on("change",".g-selectAll--input",function(f){var c=$(this).parents(".g-selectAll--main");var e=c.find(".g-selectAll--input").not(".g-selectAll").length;var d=c.find(".g-selectAll--input:checked").not(".g-selectAll").length;if(d===e){c.find(".g-selectAll").prop("checked",true);return}c.find(".g-selectAll").prop("checked",false)});b.on("click",".g-selectAll--btn",function(c){c.preventDefault();a($(this))});function a(c){var g=c.data("destory");var d=c.parents(".g-selectAll--main");var e=d.find(".g-selectAll--input:checked").not(".g-selectAll");var h=[];var j=c.data("text")||"请先选择";var k=c.data("tag")||"";var f={};var i=[];if(!g&&!e.length){$.message({type:"error",message:j,});return false}$.each(e,function(l,m){h.push($(m).data("value"));i.push($(m).val())});f={ele:c,checked:e,checkedArr:h,value:i};$.pub("GSelectAllSuccess"+k,[f])}});$(function(){var K={fixedLeft:false,fixedRight:false,fixedMinWidth:100,fixedMaxWidth:500,totalString:"--",totalTitle:"总计",handleSortData:{},noWidthColAdaptClient:false};var c=u();var q='<div class="c-table__sort {{class}}"><i class="c-table__down" aria-hidden="true"></i><i class="c-table__up" aria-hidden="true"></i></div >';var n='<div class="c-table__fixed-header-wrapper">{{theadHtml}}</div><div class="c-table__fixed-body-wrapper"> {{tbodyHtml}}</div>';var d='<div class="c-table__fixed"> {{fixedWrapper}}</div>';var t='<div class="c-table__fixed-right"> {{fixedWrapper}}</div>';var x='<div class="c-table--main" style="width: 100%;"><div class="c-table__header-wrapper"> {{theadHtml}}</div><div class="c-table__body-wrapper"> {{tbodyHtml}}</div> {{fixedLeft}}{{fixedRight}}</div>';var w='<div class="c-table__fixed-right-patch" style="width: '+c+'px; height: {{headerHeight}}px;"></div>';$("body").on("click.jqTable",".c-table__down",function(){l($(this),true)});$("body").on("click.jqTable",".c-table__up",function(){l($(this),false)});function I(T,U){this.$container=U;this.config=$.extend({},K,T);this.init(this.$container)}$.extend(I.prototype,{init:function(U){this.isSafria=/version\/([\d.]+).*safari/i.test(navigator.userAgent);this.render(U);this.event(U);var V=this;var T=this.$table.find(".c-table__sort");if(T){$.each(T,function(W,X){if($(X).hasClass("activeUp")){$(X).find(".c-table__up").trigger("click.jqTable");V.updateEvent();return false}if($(X).hasClass("activeDown")){$(X).find(".c-table__down").trigger("click.jqTable");V.updateEvent();return false}})}$(window).trigger("resize")},render:function(W){var X=this;var U=z(X,W).data("table",X);if(!X.$table){X.tableHeight=W.data("height");var T=W.parents(".c-table").last();U.addClass(T.attr("class"));T.removeAttr("class");W.after(U).remove();X.$table=U;X.$table.data("height",X.tableHeight)}else{X.$table.html(U.html());U=X.$table}U.find("table").addClass("c-table--noWp100");X.colJson=e(X);U.find("table").removeClass("c-table--noWp100");X.totalJson=S(X);X.fixedWidth=X.colJson.isAllWidth;X.headerHeight=m(X.$table);if(!X.totalJson.noTotal){X.totalArr=k(X)}if(X.fixedWidth){var V=X.colJson.width.reduce(b,0);X.$table.width(V+1)}if(!document.addEventListener){D(X)}else{E(X)}},event:function(T){var U=this;$(window).resize(function(){E(U.$table.data("table"))});this.updateEvent()},updateEvent:function(){var V=this;if(document.addEventListener){V.$table.find(".c-table__body-wrapper").scroll(function(){var aa=$(this);var X=aa.parents(".c-table--main");var ac=aa.scrollLeft();var Y=aa.scrollTop();var ab=X.find(".c-table__header-wrapper table");var Z=X.find(".c-table__footer-wrapper table");var W=X.find(".c-table__fixed-body-wrapper table");ab.css({"margin-left":-ac+"px"});Z.css({"margin-left":-ac+"px"});W.css({"margin-top":-Y+"px"})});var U={isInit:false,scrollTop:0,timer:"",prevTop:0,maxScroll:0,bodyStyle:"",isFirst:false,isBodyScroll:function(){return($("html")[0].scrollHeight-$("html")[0].clientHeight)>0}};V.$table.find(".c-table__fixed-body-wrapper").on("mousewheel",function(W){clearTimeout(U.timer);var X=$(this).parents(".c-table--main");var Z=X.find(".c-table__body-wrapper");var aa=X.data("table");if(!aa.scrollResult.colScroll){return}U.timer=setTimeout(function(){T();if(U.isBodyScroll()){$("body").attr("style",U.bodyStyle);U.isFirst=false}},500);if(!U.isFirst&&U.isBodyScroll()){U.isFirst=true;U.bodyStyle=$("body").attr("style");$("body").css({overflow:"hidden","padding-right":c+"px"})}if(!U.isInit){U.isInit=true;U.scrollTop=Z.scrollTop();U.maxScroll=Z.find("table").height()-Z.height();if(aa.scrollResult.rowScroll){U.maxScroll+=c}return}if(U.prevTop>Math.abs(W.deltaY)){T();return}U.prevTop=Math.abs(W.deltaY);var Y=-U.scrollTop+W.deltaY;if(Y>0){Y=0}if(Y<(-U.maxScroll)){Y=-U.maxScroll}X.find(".c-table__fixed-body-wrapper table").css({"margin-top":Y+"px"});Z.scrollTop(-Y)});function T(){U.isInit=false;U.scrollTop=0;U.prevTop=0}}if(V.config.fixedLeft||V.config.fixedRight){V.$table.find("tbody tr").hover(function(){var Z=$(this);var Y=Z.parents(".c-table--main");var X=Z.parents("tbody").find("tr").index(Z);var W=Y.find("tbody");$.each(W,function(ab,aa){$(aa).find("tr").eq(X).addClass("hover-row")})},function(){var W=$(this).parents(".c-table--main").find("tbody");W.find("tr").removeClass("hover-row")})}},updateHtml:function(T){this.init($(T))},updateHeight:function(T){this.tableHeight=T||this.$table.data("height");this.$table.data("height",this.tableHeight);var V=this.tableHeight-this.headerHeight;var U=this.tableHeight;if(this.scrollResult.rowScroll){V-=c;U-=c}if(this.config.fixedRight||this.config.fixedLeft){this.$table.find(".c-table__fixed-body-wrapper").css({"max-height":V+"px",top:this.headerHeight+"px"})}if(this.config.fixedLeft){this.$table.find(".c-table__fixed").height(U+"px")}if(this.config.fixedRight){this.$table.find(".c-table__fixed-right").height(U+"px")}E(this)}});function l(ad,V){var aa=V?"activeDown":"activeUp";var X=ad.parents(".c-table--main");var Z=X.data("table");var af=X.find(".c-table__fixed-body-wrapper tbody");var U=X.find(".c-table__body-wrapper table tbody");var W=U.find("tr");var ae=ad.parents("thead").find("th");var ac=[];var Y=ae.index(ad.parents("th"));X.find(".c-table__sort").removeClass("activeUp activeDown");X.find(".c-table__fixed-header-wrapper th").eq(Y).find(".c-table__sort").addClass(aa);X.find(".c-table__header-wrapper th").eq(Y).find(".c-table__sort").addClass(aa);if(W.length<=1){return}$.each(W,function(ai,ah){var ag={};ag.index=ai;ag.value=$(ah).find("td").eq(Y).text().trim();ac.push(ag)});var ab=Z.config.handleSortData;var T=Z.sortConfig;if(T[Y]){if(T[Y]&&ab[T[Y]]&&typeof(ab[T[Y]])==="function"){ac=ab[T[Y]](ac)}else{ac=g(ac,T[Y])}}ac=B(ac,"value",V);v(Z,U,ac);$.each(af,function(ag,ah){v(Z,$(ah),ac)})}function g(X,Y){var T=[];var W;var V=new RegExp(Y,"g");for(var U=0;U<X.length;U++){W=X[U];W.value=(W.value+"").replace(V,"");T.push(W)}return T}function v(aa,U,Z){var Y=U.find("tr");var V=U.clone();V.html("");for(var X=0,T=Z.length;X<T;X++){var W=Z[X].index;V.append(Y.eq(W).clone())}U.replaceWith(V);aa.updateEvent()}function B(T,V,W){var U;if(T.length<2){return}if(isNaN(T[0][V])){U=C}else{U=s}T.sort(function(Y,X){var aa=Y[V],Z=X[V];if(W){aa=X[V];Z=Y[V]}return U(aa,Z)});return T}function s(U,T){return U-T}function C(U,T){var W=U.toLowerCase(),V=T.toLowerCase();if(W<V){return -1}if(W>V){return 1}return 0}function h(W,Y){var ac=f(W,Y);if(ac.noSort){return}W.sortConfig=ac.sortConfig;var aa=ac.sort;var ab=Y.find("thead th");for(var U=0,X=aa.length;U<X;U++){var T=aa[U];if(T){var Z=T==="up"?"activeUp":T==="down"?"activeDown":"";var V=$(q.replace("{{class}}",Z));ab.eq(U).find(".cell").append(V)}}}function m(T){return T.find(".c-table__header-wrapper").height()}function z(Y,aa){var Z=aa.clone().addClass("c-table__header");var V=aa.clone().addClass("c-table__body");Z.find("tbody").remove();V.find("thead").remove();h(Y,Z);var T=Z[0].outerHTML;var ad=V[0].outerHTML;var X=n.replace("{{theadHtml}}",T).replace("{{tbodyHtml}}",ad);var U=Y.config.fixedLeft?d.replace(/{{fixedWrapper}}/g,X):"";var ab=Y.config.fixedRight?t.replace(/{{fixedWrapper}}/g,X):"";var ac=x.replace("{{theadHtml}}",T).replace("{{tbodyHtml}}",ad).replace("{{fixedLeft}}",U).replace("{{fixedRight}}",ab);var W=$(ac);return W}function D(Y){var U=Y.$table;var X=U.find(".c-table__body-wrapper");var T=X.find("table");var V;var W=Y.colJson;R(Y);V=G(X,T,U,W);if(!Y.fixedWidth){N(Y,U,W,V)}M(U,V);if(Y.fixedWidth){H(Y,U,V)}V=G(X,T,U,W);Y.scrollResult=V;if(Y.config.fixedRight||Y.config.fixedLeft){j(Y,U,V);F(Y,U,V)}else{U.addClass("el-table--enable-row-transition")}if(V.colScroll&&!U.find(".c-table__fixed-right-patch").length){X.after(w.replace("{{headerHeight}}",Y.headerHeight))}else{if(!V.colScroll){U.find(".c-table__fixed-right-patch").remove()}}if(!Y.totalJson.noTotal){L(Y,U)}}function E(T){if(!document.addEventListener){return}D(T)}function L(Z,U){var Y=U.find(".c-table__body-wrapper");var T=Y.clone().removeClass("c-table__body-wrapper").addClass("c-table__footer-wrapper");T.find(".c-table__body").removeClass(".c-table__body").addClass("c-table__footer");var X=T.find("tbody tr:not(:first)").remove();var V=U.find(".c-table__footer-wrapper");if(V.length){V.replaceWith(T)}else{Y.after(T)}var W=T.find("tbody tr").eq(0).find("td");$.each(W,function(aa,ab){W.find(".cell").eq(aa).html(Z.totalArr[aa])})}function k(X){var Y=X.totalJson;var W=X.$table.find(".c-table__body-wrapper").find("tbody tr:not(:first)");var ab=[X.config.totalTitle];var T=[];var U=X.config.totalString;$.each(W,function(ac,ad){var ae=$(ad).find("td");$.each(ae,function(af,ag){if(ac===0){T.push([])}T[af].push($(ag).text().trim())})});var aa;for(var V=1;V<Y.total.length;V++){var Z=Y.total[V];if(Z){aa=T[V].reduce(p,0)}else{aa=U}ab.push(aa)}return ab}function F(ac,aa,T){var X=aa.find(".g-selectAll--input");if(!X.length){return}var Y=aa.find(".c-table__fixed");var W=aa.find(".c-table__fixed-right");var Z=aa.find(".c-table__body-wrapper tr");var ad,ab=ac.colJson.width.length-1;var U=O(Z,0);var V=O(Z,ab);if(ac.config.fixedLeft&&U){y(W,Z,0)}if(ac.config.fixedRight&&V){y(Y,Z,ab)}}function y(U,V,T){var W=U.find(".c-table__fixed-body-wrapper tr");if(U.length){$.each(W,function(Y,X){i(X,T)})}$.each(V,function(Y,X){i(X,T)})}function i(U,T){$(U).find("td").eq(T).find(".g-selectAll--input").remove()}function O(U,T){return U.eq(0).find("td").eq(T).find(".g-selectAll--input").length}function j(ae,W,ad){var ag=ae.colJson.width.length;var V=W.find(".c-table__header-wrapper table th");var ab=W.find(".c-table__body-wrapper table tr").eq(0);var af=ab.find("td:not(.gutter)");var an=ae.headerHeight;var ao=W.height();var aj=W.width();var aa=ao-an;var am=W.find(".c-table__fixed");var al=W.find(".c-table__fixed-right");var Y=ae.config;var ac=Y.fixedLeft;var Z=Y.fixedRight;var ak="c-table__fixed--shadow";if(ad.rowScroll){aa-=c}if(ae.config.fixedRight||ac){W.find(".c-table__fixed-body-wrapper").css({"max-height":aa+"px",top:ae.headerHeight+"px"});if(ad.rowScroll){am.addClass(ak);al.addClass(ak)}else{am.removeClass(ak);al.removeClass(ak)}}if(ac&&ac<=1){am.find(".c-table__fixed-body-wrapper tr td:not(:first-child):not(.gutter)").addClass("is-hidden")}else{if(ac>1){$.each(am.find(".c-table__fixed-body-wrapper tr"),function(aq,ap){$.each($(ap).find("td:not(.gutter)"),function(ar,at){if(ar>=ac){$(at).addClass("is-hidden")}})})}}if(Z&&Z<=1){al.find(".c-table__fixed-body-wrapper tr td:not(:nth-child("+ag+")):not(.gutter)").addClass("is-hidden")}else{if(Z>1){$.each(al.find(".c-table__fixed-body-wrapper tr"),function(aq,ap){$.each($(ap).find("td:not(.gutter)"),function(ar,at){if(ar<=ag-Z-1){$(at).addClass("is-hidden")}})})}}var ai=ad.rowScroll?ao-c:ao;if(!ae.totalJson.noTotal){ai-=ab.height()}if(ac){var ah=0;if(ac<=1){ah=af.eq(0).width()}else{if(ac>1){for(var X=0;X<ac;X++){ah+=af.eq(X).width()}}}am.width(ah).height(ai);if(ae.colJson.isAllWidth===true){am.find("table").width(aj)}}if(ae.config.fixedRight){var U=ad.colScroll?c:0;var T=0;if(Z<=1){T=af.eq(af.length-1).width()}else{if(Z>1){for(var X=0;X<Z;X++){T+=af.eq(af.length-1-X).width()}}}al.width(T).height(ai).css({right:U});if(ae.colJson.isAllWidth===true){al.find("table").width(aj)}}}function H(Z,U,X){var V=U.find(".c-table__header-wrapper table");var T=U.find(".c-table__body-wrapper table");var W=Z.colJson.width.reduce(b,0);var Y=X.colScroll?W+c:W;U.width(Y+1);V.width(W);T.width(W)}function M(U,X){var V=U.find(".c-table__header-wrapper table");var T=U.find(".c-table__body-wrapper table");var W=V.find(".gutter").length;if(W){V.find(".gutter").remove();T.find(".gutter").remove()}}function R(Z){var U=Z.$table;var V=Z.$table.data("height");if(V){var Y=U.find(".c-table__body-wrapper");U.css({"max-height":V+"px"});Y.css({"max-height":"none"});var X=Z.headerHeight;var T=U.height();var W=T-X;if(!Z.totalJson.noTotal){W-=Y.find("tbody tr").eq(0).height()}Y.css({"max-height":W+"px"})}}function N(ae,ac,ag,V){var T=ac.find("colgroup");var af=ac.width();var X=ag.noWidthIndex.length;var W=ag.tdWidth.reduce(b,0);if(V.colScroll){W+=c}var U=ae.config.fixedMinWidth;var Z=ae.config.noWidthColAdaptClient;var ab=[];for(var aa=0;aa<X;aa++){var ah=ag.noWidthIndex[aa];ab.push(ag.tdWidth[ah])}var Y=ab.reduce(b,0);var ad=af-W+Y-2;if(ab.length*U>=ad){Q(ae,T,ag,ab,U)}else{ab=J(ab,ad,U,ab.length,Z);Q(ae,T,ag,ab,false)}W=ag.width.reduce(b,0)+2;ac.find(".c-table__header-wrapper table").width(W);ac.find(".c-table__body-wrapper table").width(W);ac.find(".c-table__fixed-header-wrapper table").width(W-2);ac.find(".c-table__fixed-body-wrapper table").width(W-2)}function Q(Z,T,ab,Y,U){var V=ab.noWidthIndex.length;var aa=[];for(var X=0;X<V;X++){var ac=ab.noWidthIndex[X];if(/^\d+\.\d{4,}$/.test(Y[X]+"")){Y[X]=Number(Y[X]).toFixed(3)}var W=U&&Y[X]<U?U:Y[X];ab.width[ac]=Number(W);if(W>=Z.config.fixedMaxWidth){aa.push(ac)}$.each(T,function(ad,ae){$(ae).find("col").eq(ac).attr("width",W)})}a(Z,T,ab,aa)}function a(X,U,W,T){if(X.isSafria){var V=W.noWidthIndex;if(T.length>0){A(U,W,T,true);V=V.filter(function(Y){return T.indexOf(Y)===-1})}if(V.length){A(U,W,V,false)}}}function A(U,X,T,W){for(var V=0;V<T.length;V++){var Y=T[V];$.each(U,function(ac,aa){var ab=$(aa).parents("table").find("tbody tr");var Z=W?X.width[Y]-36:"auto";$.each(ab,function(ae,ad){$(ad).find("td").eq(Y).find(".cell").width(Z)})})}}function J(ab,V,Y,W,ae){var ac=ab.reduce(p,0);var U=(V-ac)/W;if(!ae&&U<0){return ab}else{var ad=0;var af=0;var T=0;if(U>0){for(var aa=0;aa<ab.length;aa++){ab[aa]=ab[aa]+U;ab[aa]<Y?ab[aa]=Y:T++}}else{for(var Z=0;Z<ab.length;Z++){if(ab[Z]<Y){ab[Z]=Y}else{if(ab[Z]>Y){var X=ab[Z]+U;if(X>Y){T++}ab[Z]=X<Y?Y:X}}}}ac=ab.reduce(p,0);if(Math.floor(ac)!==Math.floor(V)){J(ab,V,Y,T,ae)}return ab}}function b(U,T){return U+T}function p(U,T){return U-(-T)}function u(){var V=document.createElement("p");V.style.width="100%";V.style.height="200px";var W=document.createElement("div");W.style.position="absolute";W.style.top="0px";W.style.left="0px";W.style.visibility="hidden";W.style.width="200px";W.style.height="150px";W.style.overflow="hidden";W.appendChild(V);document.body.appendChild(W);var U=V.offsetWidth;W.style.overflow="scroll";var T=V.offsetWidth;if(U==T){T=W.clientWidth}document.body.removeChild(W);return(U-T)}function f(X,U){var V=U.find("colgroup>col");var T=P("sort",V);var W=P("sortconfig",V);return{sort:T.demo,noSort:T.nodemo,sortConfig:W.demo}}function S(Y){var V=Y.$table.find(".c-table__header-wrapper table");var W=V.find("colgroup>col");var T=P("total",W);var X=T.demo;var U=T.nodemo;return{total:X,noTotal:U}}function P(T,W){var X=[];var V=0;W=W.not("[name=gutter]");$.each(W,function(aa,Z){var Y=$(Z).data(T);X.push(Y);if(Y){V++}});var U=V?false:true;return{demo:X,nodemo:U}}function r(W,U,T){var X=W.eq(T).width();var V=U.eq(T).width();return X>V?X:V}function e(X){X.$table.addClass("c-table--noWrap-init");var aa=X.$table.find(".c-table__header-wrapper table");var W=X.$table.find(".c-table__body-wrapper table");var ae=aa.find("colgroup>col");var ad=aa.width();var V=W.width();var U=[];var Y=[];var ag=ad>V?ad:V;var Z=[];var ac=[];var af=true;var T=W.find("tr").eq(0).find("td");var ab=aa.find("tr").eq(0).find("th");ae=ae.not("[name=gutter]");$.each(ae,function(ak,ai){var ah=$(ai).attr("width")?Number($(ai).attr("width")):0;ah=o(X,ah);U.push(ah);if(ah){ac.push(ah);Y.push(ah)}else{var aj=o(X,r(T,ab,ak)+1);af=false;Z.push(ak);Y.push(aj)}});X.$table.addClass("c-table__cell--block").removeClass("c-table--noWrap-init");return{width:U,noWidthIndex:Z,hasWidthArr:ac,isAllWidth:af,realTotalWidth:ag,tdWidth:Y}}function o(V,U){var T=U>V.config.fixedMaxWidth?V.config.fixedMaxWidth:U;return T}function G(Z,U,V,X){var Y=Z.height()<U.height();var T=X.width.reduce(b,0)+1;if(Y){T+=c}var W=T>V.width();if(W){Y=Z.height()-c<U.height()}return{rowScroll:W,colScroll:Y}}$.fn.jqTable=function(T){return this.each(function(){new I(T,$(this))})}}());